{% extends "base.html" %}

{%block extra-meta%} 
<meta name="keywords" content="at home services, contractors, finished jobs">
<meta name="description" content="">
{% endblock%}

{% load staticfiles %}
{% block extra-css %}
    <link rel="stylesheet" type="text/css" href="{% static 'zipcode/css/gallery.css' %}">
{% endblock %}
{% block title %}Image Gallery{% endblock %}

{% block nav %}
<nav class="navbar-default navbar-iphone5 navbar-fixed-top" role="navigation" >
  <div class="container-fluid" id="slider">
    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
      <span class="glyphicon glyphicon-menu-hamburger"></span>
    </a>
    <ul role="menu" class="dropdown-menu sb-slidebar sb-left" id="iphone5" data-role="panel" id="left-panel" data-theme="b">
      <li>
          <div>
            {% if time_image == 'day'%}
                <img class="iphone5-home-header sb-left" alt="Salt Lake City Day" src="{% static 'zipcode/images/headers/SLCDay1920.jpg' %}">
            {% elif  time_image == 'night'%}
                <img class="iphone5-home-header sb-left" alt="Salt Lake City Night" src="{% static 'zipcode/images/headers/SLCNight1920.jpg' %}">
            {% endif %}
          </div>
      </li>
      <li class="sb-left">
          <img class="repair-boxes-iphone5 img-circle" alt="air conditioner picture" src="{% static 'zipcode/images/AC.jpg' %}">
          <a href="/">Home</a>
      </li>
      <li class="sb-left">
          <img class="repair-boxes-iphone5 img-circle" alt="sink picture" src="{% static 'zipcode/images/sink.jpg' %}">
          <a href="{% static 'zipcode/images/ValueCareBrochure.pdf' %}">Value Care</a>
      </li>
      <li class="sb-left">
          <img class="repair-boxes-iphone5 img-circle" alt="garage door picture" src="{% static 'zipcode/images/Linear-Garage-Door-Opener.jpg' %}">
          <a class="active" href="careers">Careers</a>
      </li>
      <li class="sb-left">
          <img class="repair-boxes-iphone5 img-circle" alt="hardwood picture" src="{% static 'zipcode/images/hardwood_may13.jpg' %}">
          <a href="gallery">Gallery</a>
      </li>
      <li class="sb-left">
        <div id="iphone5-sidebar-ad">
          <h5 id="havenanemergency">HAVE AN EMERGENCY?</h5>
          <h5 id="call">Call</h5>
          <h3 id="iphone5-phonenumber">801-933-4663</h3>
        </div>
      </li>
    
    </ul>
      <div class="iphone5-header"><h4>HOME REPAIR HEROS</h4></div>
      <div class="btn-group" id="seach-dropdown" class="search-icon" data-role="panel" id="right-panel" data-display="push" data-position="right" data-theme="b">
  
        <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
          <span class="glyphicon glyphicon-search"></span>
        </a>
        <ul class="dropdown-menu" id="iphone-nav-search-box">
          <li id="search-box">{% load zipcode_extras %}{% show_search_form %}</li>
        </ul>
      </div>
  </div>
</nav>
<div id="screen"></div>


<div class="header">
    <div>
        {% if time_image == 'day'%}
            <img class="home-header" src="{% static 'zipcode/images/headers/SLCDay1920.jpg' %}">
        {% elif  time_image == 'night'%}
            <img class="home-header" src="{% static 'zipcode/images/headers/SLCNight1920.jpg' %}">
        {% endif %}
    </div>
</div>

<nav class="navbar navbar-default">
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li><a class="active" href="/">Home</a></li>
        <li><a href="value">Value Care</a></li>
        <li><a href="careers">Careers</a></li>
        <li><a href="gallery">Gallery</a></li>   
      </ul>     
    </div><!-- /.navbar-collapse -->
</nav>
{% endblock %}
{% block content %}
<div id="wrapper">
    <div id="sidebar-ad" class="hidden-xs hidden-sm">
        <h3>HAVE AN EMERGENCY?</h3>
        <H5>Call us directly at</H5>
        <H3>801-933-4663</H3>
    </div>
    <div id="page-content-wrapper">
        <div class="page-content">
			<h2 class="heading3">Images from our Contractors</h2>
			<div class="row container gallery-container">
				<div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 gallery">  
                        <ul>
                        {% for i in gallery %}
                            <li><img class="gallery-pic" src="/media/{{i.picture}}"></br>
                            {% if i.sourceURL %}
                                <a  class="view-source-image" href="{{i.sourceURL}}">view source...</a></br>
                            {%endif%}
                            <p class="description">{{i.caption}}</p>
                            <h3>Author: {{i.author}}</h3>
                            
                            {% if i.hashtags %}
                                <span>Hashtags:</span>
                                <a href=""class="hashtags">{{ i.hashtags }}</a></br>
                            {% endif %}
                            {% if i.socialtags %} 
                               <span>Socialtags:</span>
                               <a href="" class="socialtags">{{ i.socialtags }}</a></br>
                            {% endif  %}
                            <h5>Date: {{i.picdate}}</h5>
                            <a href="#" class="unslider-arrow prev"><span class="glyphicon glyphicon-chevron-left"></span>Previous slide</a>
                            <a href="#" class="unslider-arrow next"><span class="glyphicon glyphicon-chevron-right"></span>Next slide</a>
                            </li>
                        {% endfor %}
                        </ul>
                    </div>    
				</div>
			</div>
		</div>
	</div>
{% endblock %}
{% block extra-javascript %}
<script src="{% static 'zipcode/js/unslider.js' %}"></script>
<script type="text/javascript">
$(document).ready(function(){
    $('.gallery').unslider({
        speed: 2000,               //  The speed to animate each slide (in milliseconds)
        delay: 3000,              //  The delay between slide animations (in milliseconds)
        complete: function() {},  //  A function that gets called after every slide animation
        keys: true,               //  Enable keyboard (left, right) arrow shortcuts
        dots: true,               //  Display dot navigation
        fluid: false              //  Support responsive design. May break non-responsive designs
    });
    
   $('.unslider-arrow').click(function() {
        var fn = this.className.split(' ')[1];
        
        //  Either do unslider.data('unslider').next() or .prev() depending on the className
        $('.gallery').unslider().data('unslider')[fn]();
    }); 

   $.Htags = [];
   $.Stags = [];
   var hashtags = $('.hashtags').text().split(', ');
   var socialtags = $('.socialtags').text().split(', ');

   $.each(hashtags, function (i,v) {
        $.Htags.push('<a href="' + v + '" class="hashtags">' + v + '</a>');
    })
    $.each(socialtags, function (i,v) {
        $.Stags.push('<a href="' + v + '" class="socialtags">' + v + '</a>');
    });    

    $('.hashtags').replaceWith($.Htags.join(', '));
    $('.socialtags').replaceWith($.Stags.join(', '));
    var ht = $('.hashtags').text().split('#');
    var st = $('.socialtags').text().split('@');
    $('[name="keywords"]').attr('content', function(i,oldval){return oldval + ht + st});
    var descrip = $('.description').text();
    $('[name="description"]').attr('content', function(i,oldval){return oldval + descrip });
    $('.blue-container').css('right', '0em');
    
    var largestImageContainer = [];
    
    $('.gallery-pic').each(function(){
      var thisimage = $(this).height();
      largestImageContainer.push(thisimage);
    });

    $.each(largestImageContainer, function(k,v){
        var largest = v;
        if (typeof oldlargest === 'undefined') {
          var oldlargest =0;
        }
        if (largest > oldlargest) {
            oldlargest = largest;
        }
        if (k == largestImageContainer.length-1) {
          console.log('the largest image is:', oldlargest);
        }
    });
});
</script>
{% endblock %}
